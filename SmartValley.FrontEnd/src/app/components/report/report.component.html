<div class="container" *ngIf="report">
  <div class="row mx-auto">
    <div class="col-8 sm-title">
      <h1>Scoring report</h1>
    </div>
  </div>
  <div class="row mx-auto">
    <div class="report-card col-12">
      <div class="report-content">
        <div class="main-info col-4">
          <img src="{{projectImageUrl}}" style="width: 128px;"/>
        </div>
        <div class="description col-5">
          <div class="main-info__title">
            <span>{{report.name}}</span>
            <span>{{report.area}}</span>
          </div>
        </div>
        <div class="scoring col-3">
          <div class="scoring-container">
            <span>Scoring rating:</span>
            <span *ngIf="report.score" class="score {{projectService.colorOfProjectRate(report.score)}}">{{report.score.toFixed(0)}}</span>
            <span *ngIf="!report.score">In progress...</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row mx-auto">
    <ngb-tabset #reportTabSet (tabChange)="onMainTabChanged($event)" class="col-12 info">
      <ngb-tab id="form" title="Form">
        <ng-template ngbTabContent>
          <div class="sw-card sw-content sw-main-info">
            <div class="row">
              <span class="col-3 offset-1">Project name:</span>
              <span class="col-8">{{report.name}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Project area:</span>
              <span class="col-8">{{report.area}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Description:</span>
              <span class="col-8">{{report.description}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Status:</span>
              <span class="col-8">{{report.status}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">White paper link:</span>
              <app-nullable-link [href]="report.whitePaperLink" class="col-8"></app-nullable-link>
            </div>
          </div>

          <div class="sw-card sw-content">
            <div class="row row-title">
              <h3 class="col-10 offset-1">Core Team</h3>
            </div>
            <div *ngFor="let member of teamMembers;">
              <div class="row">
                <span class="col-1 offset-1">{{EnumTeamMemberType[member.memberType]}}:</span>
                <span class="col-3" style="margin-left: 2em;">{{member.fullName}}</span>
                <span class="col-2 offset-1 social-group">
                  <a *ngIf="member.facebookLink" href="{{member.facebookLink}}" style="margin-right: 1em;">
                    <i class="fa fa-facebook" aria-hidden="true"></i>
                  </a>
                  <a *ngIf="member.linkedInLink" href="{{member.linkedInLink}}">
                    <i class="fa fa-linkedin" aria-hidden="true"></i>
                  </a>
                </span>
              </div>
            </div>
          </div>
          <div class="sw-card sw-content">
            <div class="row row-title">
              <h3 class="col-10 offset-1">Legal part</h3>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Incorporation:</span>
              <span class="col-5">{{report.country}}</span>
            </div>
          </div>
          <div class="sw-card sw-content">
            <div class="row row-title">
              <h3 class="col-10 offset-1">Finance</h3>
            </div>
            <div class="row" style="padding-bottom: 0;">
              <span class="col-3 offset-1">Investments:</span>
            </div>
            <div class="row sub-row">
              <span class="col-3 offset-1">soft cap:</span>
              <span class="col-5">{{report.softCap}}</span>
            </div>
            <div class="row sub-row">
              <span class="col-3 offset-1">hard cap:</span>
              <span class="col-5">{{report.hardCap}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Financial model link:</span>
              <app-nullable-link [href]="report.financeModelLink" class="col-5"></app-nullable-link>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Attracted investments:</span>
              <span *ngIf="report.attractedInvestments; else noAttract" style="color:green;"
                    class="col-5">Yes</span>
              <ng-template #noAttract>
                <span style="color:red;" class="col-5">No</span>
              </ng-template>
            </div>
          </div>
          <div class="sw-card sw-content">
            <div class="row row-title">
              <h3 class="col-10 offset-1">Tech</h3>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Blockchain:</span>
              <span class="col-5">{{report.blockChainType}}</span>
            </div>
            <div class="row">
              <span class="col-3 offset-1">Prototype/MVP link:</span>
              <app-nullable-link [href]="report.mvpLink" class="col-5"></app-nullable-link>
            </div>
          </div>
          <div style="margin-left: calc(4em - 5px);" class="submit-button row">
            <button class="trans-btn col-3 btn btn-primary"
                    style="padding-top: 1em; padding-bottom: 1em;"
                    (click)="showEstimates()">
              Experts estimates
              <i class="fa fa-arrow-right" aria-hidden="true"></i>
            </button>
          </div>
        </ng-template>
      </ngb-tab>
      <ngb-tab id="estimates" title="Experts estimates">
        <ng-template ngbTabContent>
          <div class="content sw-card sw-content">
            <mat-tab-group (selectedTabChange)="onExpertiseTabChanged($event)">
              <mat-tab label="HR">
                <span>HR average score: </span>
                <span *ngIf="categoryAverageScore > -1; else elseBlock">{{categoryAverageScore.toFixed(2)}}</span>
                <ng-template #elseBlock><span>in progress</span></ng-template>
                <app-questions [questions]="questions"></app-questions>
              </mat-tab>
              <mat-tab label="Lawyer">
                <span>Lawyer average score: </span>
                <span *ngIf="categoryAverageScore > -1; else elseBlock">{{categoryAverageScore.toFixed(2)}}</span>
                <ng-template #elseBlock><span>in progress</span></ng-template>
                <app-questions [questions]="questions"></app-questions>
              </mat-tab>
              <mat-tab label="Analyst">
                <span>Analyst average score: </span>
                <span *ngIf="categoryAverageScore > -1; else elseBlock">{{categoryAverageScore.toFixed(2)}}</span>
                <ng-template #elseBlock><span>in progress</span></ng-template>
                <app-questions [questions]="questions"></app-questions>
              </mat-tab>
              <mat-tab label="Technical expert">
                <span>Technical expert average score: </span>
                <span *ngIf="categoryAverageScore > -1; else elseBlock">{{categoryAverageScore.toFixed(2)}}</span>
                <ng-template #elseBlock><span>in progress</span></ng-template>
                <app-questions [questions]="questions"></app-questions>
              </mat-tab>
            </mat-tab-group>
          </div>
          <div style="margin-left: calc(4em - 5px);" class="submit-button row">
            <button class="trans-btn col-3 btn btn-primary"
                    style="padding-top: 1em; padding-bottom: 1em;"
                    (click)="showForm()">
              <i class="fa fa-arrow-left" aria-hidden="true"></i>
              Form
            </button>
          </div>
        </ng-template>
      </ngb-tab>
    </ngb-tabset>
  </div>
</div>
